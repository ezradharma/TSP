<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.3.3/dist/echarts.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js" integrity="sha512-ElRFoEQdI5Ht6kZvyzXhYG9NqjtkmlkfYk0wr6wHxU9JEHakS7UJZNeml5ALk+8IKlU6jDgMabC3vkumRokgJA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <title>TSP Rates Page</title>
</head>
<body style="padding: 1.6em">
    <h1 id="store_title"><a href="./">{{ store }}</a></h1>
    <span>Reward Platforms w/ Highest Cashback Rates: </span>
    <span id="plat1">{{top5_stores[0]}}</span>
    <span>, </span>
    <span id="plat2">{{top5_stores[1]}}</span>
    <span>, </span>
    <span id="plat3">{{top5_stores[2]}}</span>
    <span>, </span>
    <span id="plat4">{{top5_stores[3]}}</span>
    <span>, </span>
    <span id="plat5">{{top5_stores[4]}}</span>
    <br>
    <span>Highest Cashback Rates for {{ store }}: </span>
    <span id="num1">{{top5_rates[0]}}</span>
    <span>%, </span>
    <span id="num2">{{top5_rates[1]}}</span>
    <span>%, </span>
    <span id="num3">{{top5_rates[2]}}</span>
    <span>%, </span>
    <span id="num4">{{top5_rates[3]}}</span>
    <span>%, </span>
    <span id="num5">{{top5_rates[4]}}</span><span>%</span>
    <div id="main" class="center" style="width: 100vw; height:800px;"></div>
        <script type="text/javascript">
            var myChart = echarts.init(document.getElementById('main'));
            var arr = document.getElementById('num1').textContent;
            var arr2 = document.getElementById('num2').textContent;
            var arr3 = document.getElementById('num3').textContent;
            var arr4 = document.getElementById('num4').textContent;
            var arr5 = document.getElementById('num5').textContent;
            var plat = document.getElementById('plat1').text;
            var plat2 = document.getElementById('plat2').textContent;
            var plat3 = document.getElementById('plat3').textContent;
            var plat4 = document.getElementById('plat4').textContent;
            var plat5 = document.getElementById('plat5').textContent;
            var name = document.getElementById('store_title').textContent;

            var option = {
                title: {
                    text: name + '\'s Top Cashback Rates'
                },
                tooltip: {},
                legend: {
                data: ['Rates']
                },
                xAxis: {
                    data: [plat1, plat2, plat3, plat4, plat5]
                },
                yAxis: {},
                series: [{
                    name: 'rates',
                    type: 'bar',
                    data: [arr, arr2, arr3, arr4, arr5]
                }]
            };

            // Display the chart using the configuration items and data just specified.
            myChart.setOption(option);
    </script>
    <table class="table table-striped table-bordered">
        <tr>
        <th>Reward Platforms</th>
        <th>Best Rates</th>
        </tr>
        {% for i in range(0, len) %}
        <tr>
            <td><a class="Store_Info" href="{{ links[i] }}">{{ providers[i] }}</a></td><td>{{ rates[i] }}</td>
        </tr>
        {% endfor %}
    </table>
</body>
</html>